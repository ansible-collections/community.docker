# GNU General Public License v3.0+ (see LICENSES/GPL-3.0-or-later.txt or https://www.gnu.org/licenses/gpl-3.0.txt)
# SPDX-License-Identifier: GPL-3.0-or-later
# SPDX-FileCopyrightText: 2025 Felix Fontein <felix@fontein.de>

[collection_sources]
"community.general" = "git+https://github.com/ansible-collections/community.general.git,main"
"community.internal_test_tools" = "git+https://github.com/ansible-collections/community.internal_test_tools.git,main"
"community.library_inventory_filtering_v1" = "git+https://github.com/ansible-collections/community.library_inventory_filtering.git,stable-1"

[collection_sources_per_ansible.'2.11']
"community.crypto" = "git+https://github.com/ansible-collections/community.crypto.git,stable-2"
# community.general's stable-8 branch needs ansible-core >= 2.13
"community.general" = "git+https://github.com/ansible-collections/community.general.git,stable-7"

[collection_sources_per_ansible.'2.12']
"community.crypto" = "git+https://github.com/ansible-collections/community.crypto.git,stable-2"
# community.general's stable-8 branch needs ansible-core >= 2.13
"community.general" = "git+https://github.com/ansible-collections/community.general.git,stable-7"

[collection_sources_per_ansible.'2.13']
"community.crypto" = "git+https://github.com/ansible-collections/community.crypto.git,stable-2"
# community.general's stable-10 branch needs ansible-core >= 2.15
"community.general" = "git+https://github.com/ansible-collections/community.general.git,stable-9"

[collection_sources_per_ansible.'2.14']
"community.crypto" = "git+https://github.com/ansible-collections/community.crypto.git,stable-2"
# community.general's stable-10 branch needs ansible-core >= 2.15
"community.general" = "git+https://github.com/ansible-collections/community.general.git,stable-9"

[collection_sources_per_ansible.'2.15']
# community.crypto's main branch needs ansible-core >= 2.17
"community.crypto" = "git+https://github.com/ansible-collections/community.crypto.git,stable-2"
# community.general's main branch needs ansible-core >= 2.16
"community.general" = "git+https://github.com/ansible-collections/community.general.git,stable-10"

[collection_sources_per_ansible.'2.16']
# community.crypto's main branch needs ansible-core >= 2.17
"community.crypto" = "git+https://github.com/ansible-collections/community.crypto.git,stable-2"

[sessions]

[sessions.docs_check]
validate_collection_refs="all"
codeblocks_restrict_types = [
    "ansible-output",
    "console",
    "yaml",
    "yaml+jinja",
]
codeblocks_restrict_type_exact_case = true
codeblocks_allow_without_type = false
codeblocks_allow_literal_blocks = false

[sessions.license_check]

[sessions.extra_checks]
run_no_unwanted_files = true
no_unwanted_files_module_extensions = [".py"]
no_unwanted_files_yaml_extensions = [".yml"]
run_action_groups = true

[[sessions.extra_checks.action_groups_config]]
name = "docker"
pattern = "^.*$"
exclusions = [
    "current_container_facts",
    "docker_context_info",
]
doc_fragment = "community.docker.attributes.actiongroup_docker"

[sessions.build_import_check]
run_galaxy_importer = true
